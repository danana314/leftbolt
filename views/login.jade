doctype html
html(lang="en")
	head
		title Show Me

		link(rel='stylesheet', href='//maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css')
		script(type='text/javascript', src='https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js')
		script(type='text/javascript', src='//maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js')
		script(type='text/javascript', src='http://ajax.aspnetcdn.com/ajax/knockout/knockout-3.1.0.js')

		style(type='text/css').
			body {
				padding-top: 40px;
				padding-bottom: 40px;
				background-color: #f5f5f5;
			}

			.form-signin {
				max-width: 300px;
				padding: 19px 29px 29px;
				margin: 0 auto 20px;
				background-color: #fff;
				border: 1px solid #e5e5e5;
				border-radius: 5px;
				box-shadow: 0 1px 2px rgba(0, 0, 0, .05);
			}

			.form-signin .form-signin-heading {
				margin-bottom: 10px;
			}

		script(type='text/javascript').
			// (on document ready)
			$(function() {
				$("#checkin_form").on('submit', function(e) {
					// Prevent submit 
					e.preventDefault();

					$.ajax({
					  url: '/newroom',
					  type: 'POST',
					  contentType: "application/json",
					  async: true,
					  success: function(data) {
						if (data.roomid) {
						  window.location.href = "./r/"+data.roomid+"/1/";
						}
					  }
					});
				});
			});

	body
		.container
			form#checkin_form.form-signin
				div(style="text-align: center;")
					button.btn.btn-large.btn-primary(type='submit') Start new room!
	